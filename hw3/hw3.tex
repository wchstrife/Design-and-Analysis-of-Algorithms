%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% University/School Laboratory Report
% LaTeX Template
% Version 3.1 (25/3/14)
%
% This template has been downloaded from:
% http://www.LaTeXTemplates.com
%
% Original author:
% Linux and Unix Users Group at Virginia Tech Wiki 
% (https://vtluug.org/wiki/Example_LaTeX_chem_lab_report)
%
% License:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%	PACKAGES AND DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass[UTF8]{ctexart}

\usepackage{siunitx} % Provides the \SI{}{} and \si{} command for typesetting SI units
\usepackage{graphicx} % Required for the inclusion of images
\usepackage{graphics}%图片设置
\usepackage{subfigure}

\usepackage{natbib} % Required to change bibliography style to APA
\usepackage{amsmath} % Required for some math elements 
\usepackage{amssymb} % 使用因为所以符号
\usepackage{fancyhdr} % 使用页眉

\usepackage{algorithm}
\usepackage{algorithmic}

\pagestyle{fancy}
\fancyhf{} 
\cfoot{\thepage} 
% TODO 自定义页眉
% TODO 解释python不会溢出的原因

\setlength\parindent{0pt} % Removes all indentation from paragraphs

\renewcommand{\labelenumi}{\alph{enumi}.} 

%----------------------------------------------------------------------------------------
%	DOCUMENT INFORMATION
%----------------------------------------------------------------------------------------
\title{算法分析与设计-作业三}

\author{王宸昊 2019214541}

\date{\today}

\begin{document}

\maketitle

%----------------------------------------------------------------------------------------
%	SECTION 1
%----------------------------------------------------------------------------------------

\section{CLRS, Page, 112 8.3-4}

证明： \\
借鉴基数排序的思想，将取值从0到$n^3-1$的n个整数，用n进制来表示，即每一位都是0到n-1的正整数，则最多用$log_n(n^3)=3$位可以表示$n^3$个整数。\\
根据P.111的引理8.3可知，排序的时间复杂度为$\varTheta(3(n+n)) = \varTheta(n)$，满足$O(n)$。

%----------------------------------------------------------------------------------------
%	SECTION 2
%----------------------------------------------------------------------------------------

\section{CLRS, Page, 114 8.4-4}

证明：\\
借鉴桶排序的思想，关键问题将点的分布均匀的映射到不同的桶中。因为所有的点服从均匀分布，所以将半径为1的圆，根据面积等分为n份，即等分为n个面积为1/n的圆环，则第i个圆盘的半径满足：

\begin{align*}
    \pi({r_i}^2-{r_{i-1}}^2) &= \frac{\pi}{n} \\
    {r_i}^2-{r_{i-1}}^2 &= \frac{1}{n}\\
    \vdots\\
    {r_2}^2-{r_{1}}^2 &= \frac{1}{n}
\end{align*}

因此，由上式的递推公式可得，第i个圆环的半径为$r_i=\sqrt{\frac{i}{n}}$。\\
则对应桶的半径区间为$[0,\sqrt{\frac{1}{n}}), [\sqrt{\frac{i}{n}}, \sqrt{\frac{2}{n}}), \ddots, [\sqrt{\frac{n-1}{n}}, 1) $。

由上所知共有n个桶，根据下面公式，即可由每个点的d得到应放在第k个桶内：

\begin{equation*}
    k=\left\{
    \begin{array}{rcl}
    \left\lfloor d * n\right\rfloor + 1 & & {d < 1}\\
    n & & {d = 1}
    \end{array} \right.
\end{equation*}
  




%----------------------------------------------------------------------------------------
%	SECTION 3
%----------------------------------------------------------------------------------------




\section{对比不同排序算法的排序效果}

\subsection{算法简介}



\subsection{算法伪代码}



\subsection{实验结果}
首先介绍实验的实验环境。
编译环境为Python3.6，操作系统的版本为Win10。
CPU为AMD Ryzen 7 1700(3.0 GHz)，RAM 16G。\\
测试环境下，使用Python中time模块进行测量算法执行时间，最高精度达到微秒级别。此外还额外使用numpy模块进行高精度矩阵运算。\\
在实验方法上，将输入规模n逐渐增大，为了降低随机因素对执行效果的影响，对于每一个n进行10次计算取平均值。\\

\subsection{选做部分}
在本机上进行$10^9$规模的实验的时候，会发生MemoryError，如下图所示\\

究其原因，与Python中无符号整型数的范围有关，在python中，int类型的数并不会溢出，而是会根据数据的大小动态的申请空间，由于我们每个数的取值范围为$[0,2^{32}-1]$在Python中，每$2^{30}$个数会增加4字节.在最差的情况下，因此从原理上我们的数据需要8个字节来表示，但是按照这种算法，我们需要申请大约8GB的内存就足够分配了，但是为什么在16G的内存下还是溢出了呢？\\

于是我测量了$2^{32}-1$实际在本机上占用的空间大小，print(sys.getsizeof(2**32-1))，注意这里返回的单位是字节。
得到的结果是32bytes，也就是32字节，为什么会多出这么多位呢，经过一番查证后发现，正是由于在Python中整型不会溢出，根据每台机器上的硬件设备不同，所以需要在每个整型对象头部添加大量的信息。按照这样计算，我们大约需要32GB的内存，16GB的内存也就自然会溢出了\\

为了解决这个问题，采用最暴力的方法，寻找一台内存32GB以上的服务器执行，得到的结果如下表

TODO 参考文献：
https://stackoverflow.com/questions/10365624/sys-getsizeofint-returns-an-unreasonably-large-value

\end{document}